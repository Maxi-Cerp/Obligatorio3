package prueba_obli;

import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.Serializable;
import java.io.OutputStream;
import java.io.PrintStream;

public class VentanaPrincipal extends JFrame implements Serializable {
    private static final long serialVersionUID = 1L;
    private JTextArea consoleTextArea;

    public VentanaPrincipal(String usuario, String rol) {
        setTitle("Bienvenido, " + usuario);
        setSize(400, 400);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLocationRelativeTo(null);

        // Crear un panel con BorderLayout
        JPanel panel = new JPanel(new BorderLayout());

        // Panel izquierdo con GridLayout de 5 filas y 1 columna para los botones
        JPanel leftPanel = new JPanel(new GridLayout(5, 1));
        
        // Botones
        JButton botonAlta = new JButton("Alta");
        JButton botonBaja = new JButton("Baja");
        JButton botonModificacion = new JButton("Modificación");
        JButton botonMostrar = new JButton("Mostrar");
        JButton botonAceptar = new JButton("Aceptar");

        // Agregar los botones al panel izquierdo
        leftPanel.add(botonAlta);
        leftPanel.add(botonBaja);
        leftPanel.add(botonModificacion);
        leftPanel.add(botonMostrar);
        leftPanel.add(botonAceptar);

        // Panel derecho con JTextArea para la consola
        consoleTextArea = new JTextArea();
        consoleTextArea.setEditable(false); // Hacer la consola no editable
        JScrollPane scrollPane = new JScrollPane(consoleTextArea);

        // Agregar el panel izquierdo y el panel de la consola al panel principal
        panel.add(leftPanel, BorderLayout.WEST);
        panel.add(scrollPane, BorderLayout.CENTER);

        // Redirigir la salida estándar a la consola JTextArea
        PrintStream printStream = new PrintStream(new ConsoleOutputStream(consoleTextArea));
        System.setOut(printStream);

        // Agregar el panel principal a la ventana principal
        add(panel);
    }

    public static void main(String[] args) {
        String usuario = "UsuarioEjemplo"; // Define usuario
        String rol = "Docente"; // Define rol

        SwingUtilities.invokeLater(() -> {
            VentanaPrincipal ventanaPrincipal = new VentanaPrincipal(usuario, rol);
            ventanaPrincipal.setVisible(true);
        });
    }

    // Clase para redirigir la salida estándar a la JTextArea de la consola
    private class ConsoleOutputStream extends OutputStream {
        private JTextArea textArea;

        public ConsoleOutputStream(JTextArea textArea) {
            this.textArea = textArea;
        }

        @Override
        public void write(int b) {
            textArea.append(String.valueOf((char) b));
            textArea.setCaretPosition(textArea.getDocument().getLength());
        }
    }
}
